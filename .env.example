# ==============================================
# RAG Pepper - Personal RAG System Configuration
# ==============================================
# Copy this file to .env and fill in your values
#
# Architecture: Obsidian -> n8n -> Supabase -> Dify -> MCP -> Claude Desktop
# ==============================================

# ============================================
# REQUIRED - Must be set before first run
# ============================================

# Dify Secret Key (generate with: openssl rand -base64 42)
SECRET_KEY=your-secret-key-here

# Initial admin password for Dify (set on first run)
INIT_PASSWORD=

# ============================================
# Supabase Configuration (Cloud Vector DB)
# ============================================

# Your Supabase project URL (e.g., https://xxxxx.supabase.co)
SUPABASE_URL=

# Supabase API Key (use 'anon' key for client-side, 'service_role' for server-side)
SUPABASE_API_KEY=

# ============================================
# LLM API Keys
# ============================================

# OpenAI API Key (for embeddings and chat)
OPENAI_API_KEY=

# Anthropic API Key (optional, for Claude models in Dify)
ANTHROPIC_API_KEY=

# ============================================
# Dify API Configuration (for MCP Server)
# ============================================

# Dify API Base URL (after setup, usually http://localhost/v1)
DIFY_API_BASE_URL=http://localhost/v1

# Dify App API Key (get from Dify after creating an app)
DIFY_API_KEY=

# ============================================
# Database Configuration
# ============================================

# PostgreSQL (Dify internal database)
DB_USERNAME=postgres
DB_PASSWORD=difyai123456
DB_HOST=db
DB_PORT=5432
DB_DATABASE=dify
SQLALCHEMY_POOL_SIZE=30
SQLALCHEMY_POOL_RECYCLE=3600

# ============================================
# Redis Configuration
# ============================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_USERNAME=
REDIS_PASSWORD=difyai123456
REDIS_DB=0
CELERY_BROKER_URL=redis://:difyai123456@redis:6379/1

# ============================================
# n8n Configuration
# ============================================

# Timezone (https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)
GENERIC_TIMEZONE=Asia/Seoul

# n8n Webhook URL (for external triggers)
N8N_WEBHOOK_URL=http://localhost:5678/

# n8n Host and Port
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http

# Obsidian Vault Path (mount your vault for n8n to watch)
# Example: /home/youruser/Documents/Obsidian/MyVault
OBSIDIAN_VAULT_PATH=./obsidian-vault

# ============================================
# Service Configuration
# ============================================

# Dify Deployment Environment (PRODUCTION or TESTING)
DEPLOY_ENV=PRODUCTION

# Log Level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Debug Mode
DEBUG=false
FLASK_DEBUG=false

# Storage Type (local, s3, azure-blob, etc.)
STORAGE_TYPE=local

# Nginx Port
NGINX_PORT=80

# ============================================
# Optional - URLs (leave empty for localhost)
# ============================================

# Console URLs
CONSOLE_WEB_URL=
CONSOLE_API_URL=

# Service API URL
SERVICE_API_URL=

# App URLs
APP_WEB_URL=
APP_API_URL=

# Files URL
FILES_URL=

# ============================================
# MCP Server Configuration (for Claude Desktop)
# ============================================

# MCP Server Host and Port
MCP_SERVER_HOST=0.0.0.0
MCP_SERVER_PORT=8000

# Logging
MCP_LOG_LEVEL=INFO
